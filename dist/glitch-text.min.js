/*! Copyright (c) 2017 Bartosz Lorek. MIT license */

!function(t,n){"function"==typeof define&&define.amd?define([],n):t.GlitchText=n()}(this,function(){var t,n,e;return function(r){function i(t,n){var e,r,i,o,u,a,l,f,s,c,p=n&&n.split("/"),h=d.map,m=h&&h["*"]||{};if(t&&"."===t.charAt(0)&&n){for(p=p.slice(0,p.length-1),t=p.concat(t.split("/")),f=0;c=t[f];f++)if("."===c)t.splice(f,1),f-=1;else if(".."===c){if(1===f&&(".."===t[2]||".."===t[0]))return!0;f>0&&(t.splice(f-1,2),f-=2)}t=t.join("/")}if((p||m)&&h){for(e=t.split("/"),f=e.length;f>0;f-=1){if(r=e.slice(0,f).join("/"),p)for(s=p.length;s>0;s-=1)if(i=h[p.slice(0,s).join("/")],i&&(i=i[r])){o=i,u=f;break}if(o)break;!a&&m&&m[r]&&(a=m[r],l=f)}!o&&a&&(o=a,u=l),o&&(e.splice(0,u,o),t=e.join("/"))}return t}function o(t,n){return function(){return p.apply(r,w.call(arguments,0).concat([t,n]))}}function u(t){return function(n){return i(n,t)}}function a(t){return function(n){h[t]=n}}function l(t){if(m.hasOwnProperty(t)){var n=m[t];delete m[t],y[t]=!0,c.apply(r,n)}if(!h.hasOwnProperty(t))throw new Error("No "+t);return h[t]}function f(t,n){var e,r,o=t.indexOf("!");return o!==-1?(e=i(t.slice(0,o),n),t=t.slice(o+1),r=l(e),t=r&&r.normalize?r.normalize(t,u(n)):i(t,n)):t=i(t,n),{f:e?e+"!"+t:t,n:t,p:r}}function s(t){return function(){return d&&d.config&&d.config[t]||{}}}var c,p,h={},m={},d={},y={},w=[].slice;c=function(t,n,e,i){var u,c,p,d,w,g,v=[];if(i=i||t,"function"==typeof e){for(n=!n.length&&e.length?["require","exports","module"]:n,g=0;g<n.length;g++)if(w=f(n[g],i),p=w.f,"require"===p)v[g]=o(t);else if("exports"===p)v[g]=h[t]={},u=!0;else if("module"===p)c=v[g]={id:t,uri:"",exports:h[t],config:s(t)};else if(h.hasOwnProperty(p)||m.hasOwnProperty(p))v[g]=l(p);else if(w.p)w.p.load(w.n,o(i,!0),a(p),{}),v[g]=h[p];else if(!y[p])throw new Error(t+" missing "+p);d=e.apply(h[t],v),t&&(c&&c.exports!==r&&c.exports!==h[t]?h[t]=c.exports:d===r&&u||(h[t]=d))}else t&&(h[t]=e)},t=n=p=function(t,n,e,i){return"string"==typeof t?l(f(t,n).f):(t.splice||(d=t,n.splice?(t=n,n=e,e=null):t=r),n=n||function(){},i?c(r,t,n,e):setTimeout(function(){c(r,t,n,e)},15),p)},p.config=function(t){return d=t,p},e=function(t,n,e){n.splice||(e=n,n=[]),m[t]=[t,n,e]},e.amd={jQuery:!0}}(),e("tools/almond",function(){}),e("aframe",[],function(){function t(t){function n(){t()!==!1&&(e.id=requestAnimationFrame(n))}var e={};return e.id=requestAnimationFrame(n),e}function n(n,e){var r=Array.prototype.slice.call(arguments,2),i=0;return t(function(){if(i>=(e||0)){if(n.apply(null,r)===!1)return!1;i=0}i++})}function e(n,e){var r=Array.prototype.slice.call(arguments,2),i=Date.now();return t(function(){var t=Date.now(),o=t-i;if(o>=(e||0)){if(n.apply(null,r)===!1)return!1;i=t}})}function r(t){if("object"!=typeof t)return null;var n=Array.prototype.slice.call(t);return{value:"number"==typeof n[0]&&n[0]||0,params:n.slice("number"==typeof n[0]?1:0,-1),callback:"function"==typeof n[n.length-1]&&n.slice(-1)[0]||function(){}}}function i(t,n,e){n=n||"then";var o="pending",u=null;this.id=[],this.handle=r(e),this.resolve=function(){if(null===this.handle)return!1;var n=this.handle.callback,e=function(){o="resolved",n.apply(null,arguments),null!==u&&u.resolve()};request=t.apply(null,[e,this.handle.value].concat(this.handle.params)),this.id.push(request)},this[n]=function(){return u=new i(t,n),u.handle=r(arguments),u.id=this.id,"resolved"===o&&u.resolve(),u},this.resolve()}return function(){for(var t=0,n=["ms","moz","webkit","o"],e=0;e<n.length&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window[n[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n[e]+"CancelAnimationFrame"]||window[n[e]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n,e){var r=(new Date).getTime(),i=Math.max(0,16-(r-t)),o=window.setTimeout(function(){n(r+i)},i);return t=r+i,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}(),{clear:function(t){if(!t.hasOwnProperty("id"))return!1;var n=t.id;return"object"==typeof n&&n.hasOwnProperty("id")?this.clear(n):(n.constructor===Array&&(n=n.length-1),"number"==typeof n&&(cancelAnimationFrame(n),!0))},setInterval:e,setTimeout:function(t){var n=Array.prototype.slice.call(arguments,1);return n.unshift(function(){return t.apply(null,arguments),!1}),e.apply(null,n)},setFrameval:n,setFrameout:function(t){var e=Array.prototype.slice.call(arguments,1);return e.unshift(function(){return t.apply(null,arguments),!1}),n.apply(null,e)},waitTime:function(){return new i(this.setTimeout,"waitTime",arguments)},waitFrame:function(){return new i(this.setFrameout,"waitFrame",arguments)}}}),e("glitchText",["aframe"],function(t){function n(t,n,e,r){var i,o;if("string"!=typeof n&&""!==n)throw"getArgument function needs type!";if("number"==typeof e)o=e<0?t[t.length+e]:t[e],typeof o===n&&(i=o);else{if(e.constructor!==Array)throw"getArgument function needs index!";o=t.slice(e).filter(function(t){return typeof t===n}),o.length>0&&(i=o[0])}return"undefined"==typeof i?r:i}function e(t){var n=t.children;return n.length>0?e(n[0]):t}function r(t,n,e){return Math.min(Math.max(t,n),e)}function i(){var t="57e5d1a9f98f8b2f6880de32",n=Math.floor(Math.random()*t.length);return t[n]}function o(t){return this.element=document.getElementById(t),this.originalText=this.text(),this.requests={},this}return o.prototype={text:function(t){var n=e(this.element);return 1!==n.nodeType&&11!==n.nodeType&&9!==n.nodeType?"":"string"==typeof t?n.textContent=t:n.textContent},glitchSlice:function(t,n){t=(t=parseFloat(t))||0,n=(n=parseFloat(n))||1,t<0&&(t=1+t),n<0&&(n=1+n),t=r(t,0,1),n=r(n,0,1);var e=this.originalText;return 1===t||t>n?e:e.split("").map(function(r,o){if(" "===r)return r;var u=o/e.length;return u>=.99&&(u=1),u>=t&&u<=n&&t!==n?i():r}).join("")},glitchRandom:function(t){(t=t||0)<0&&(t=0);var n,e,r=this.originalText,o=Math.round(r.length*t),u=[];if(o<=0)return r;for(;o--;)for(n=!1;!n;)e=Math.round(Math.random()*r.length),u.indexOf(e)<0&&(u.push(e),n=!0);return r.split("").map(function(t,n){return" "===t?t:u.indexOf(n)>-1?i():t}).join("")},animate:function(){var e,r=Array.prototype.slice.call(arguments),i=n(r,"number",0,1),o=n(r,"number",1,20),u=n(r,"function",[-2],!1),a=n(r,"string",[-1],!1),l=0;if("function"!=typeof u)throw"Animate method needs callback!";var f=function(){if(l>=1)return!1;l+=1/o,l>=.99&&(l=1);var t=u(l);"string"==typeof t&&this.text(t)};return f=f.bind(this),u=u.bind(this),e=t.setInterval(f,Math.round(1e3*i/o)),"string"==typeof a&&(this.requests[a]=e),this},repeat:function(){function e(){a.id=t.setTimeout(function(){o(),e()},1e3*i*Math.random())}var r=Array.prototype.slice.call(arguments),i=n(r,"number",0,20),o=n(r,"function",[-2],!1),u=n(r,"string",[-1],!1),a={};if("function"!=typeof o)throw"Repeat method needs callback!";return o=o.bind(this),e(),"string"==typeof u&&(this.requests[u]=a),this},stop:function(n){if("string"==typeof n){for(var e in this.requests)if(e===n){t.clear(this.requests[e]),delete this.requests[e];break}}else{for(var e in this.requests)t.clear(this.requests[e]);this.requests=[]}return this}},o}),n("glitchText")});