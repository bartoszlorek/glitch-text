!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.glitchText=t()}(this,function(){"use strict";function n(n){return null==n?[]:void 0!==n.length?Array.prototype.slice.call(n):[n]}function t(n){var t=null==n?0:n.length;return t?function(r){for(var i=null==r?0:r.length,e="";i--;)e+=n[Math.floor(Math.random()*t)];return e}:function(){return""}}function r(n,t,r,i){var e=null==n?-1:n.length;if(e<0)return"";if(void 0===i&&"function"==typeof r&&(i=r,r=e),t=null==t?0:t,r=void 0===r?e:r,t<0&&(t=-t>e?0:e+t),(r=r>e?e:r)<0&&(r+=e),t>r&&t<e&&(r=[t,t=r][0]),t>e)return n;"function"==typeof i&&(i=i(e?n.substring(t,r):""));return n.substring(0,t)+(null!=i?i:"")+n.substring(r)}function i(n,t,i,e){var u=null==t?0:t.length;return u?(null!=i&&(i=Math.floor(u*i)),null!=e&&(e=Math.floor(u*e)),r(t,i,e,n)):""}function e(n,t){for(var r=null!=t?t:[],i=0;i<n;)r.push(i++);return r}function u(n){var t,r,i;for(t=n.length-1;t>0;t--)r=Math.floor(Math.random()*(t+1)),i=n[t],n[t]=n[r],n[r]=i;return n}function o(n,t){if(t=t>n?t:n,!n)return[];if(n===t)return u(e(n));for(var r={},i=[];n;){var o=Math.floor(Math.random()*t);void 0===r[o]&&(r[o]=!0,i.push(o),n-=1)}return i}function a(n,t,r){var i=null==t?0:t.length;if(!i||null==n)return"";if(!r)return t;for(var e=o(Math.floor(r*i),i),u=e.length,a=t.split("");u--;){var f=e[u];" "!==a[f]&&(a[f]=n(a[f]))}return a.join("")}var f="57e5d1a9f98f8b2f6880de32";function l(n){return n&&"number"==typeof n.id}function c(n){if(null==n)return{id:-1};var t={};return t.id=requestAnimationFrame(function r(){!1!==n()&&(t.id=requestAnimationFrame(r))}),t}function d(n,t){for(var r=arguments.length,i=Array(r>2?r-2:0),e=2;e<r;e++)i[e-2]=arguments[e];if(null==n)return{id:-1};t=t||0;var u=Date.now();return c(function(){var r=Date.now();if(r-u>=t){if(!1===n.apply(null,i))return!1;u=r}})}function s(n,t){return t?s(t,n%t):n}function v(n){return n&&!0===n.__fraction}function h(n,t){return v(n)?n:m(n,t)}function m(n,t){var r=0,i=1,e=1;if(null==n||isNaN(n))r=i=NaN;else if(void 0!==t){if(r=Math.abs(n),0===(i=Math.abs(t)))throw new Error("division by zero");e=n*t}else if(n<0&&(e=n,n=-n),n%1==0)r=n;else{r=n.toString().replace(/\d+[.]/,""),i=Math.pow(10,r.length),n>1&&(r=+r+Math.floor(n)*i);var u=s(r,i);r/=u,i/=u}return{n:r,d:i,s:e<0?-1:1}}!function(){for(var n=0,t=["ms","moz","webkit","o"],r=0;r<t.length&&!window.requestAnimationFrame;++r)window.requestAnimationFrame=window[t[r]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[r]+"CancelAnimationFrame"]||window[t[r]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,r){var i=(new Date).getTime(),e=Math.max(0,16-(i-n)),u=window.setTimeout(function(){t(i+e)},e);return n=i+e,u}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})}();var p={__fraction:!0,valueOf:function(){return this.s*this.n/this.d},add:function(n){var t=h(n);return w(this.s*this.n*t.d+t.s*t.n*this.d,this.d*t.d)},subtract:function(n){var t=h(n);return w(this.s*this.n*t.d-t.s*t.n*this.d,this.d*t.d)},multiply:function(n){var t=h(n);return w(this.s*t.s*this.n*t.n,this.d*t.d)},divide:function(n){var t=h(n);return w(this.s*t.s*this.n*t.d,this.d*t.n)}};function w(n,t){var r=h(n,t),i=Object.create(p);return i.n=r.n,i.d=r.d,i.s=r.s,i}var g=w;function y(n){return(2*Math.random()-1)*n}var A={clear:function(n){l(n)&&(cancelAnimationFrame(n.id),n.id=-1)},setInterval:d,setTimeout:function(n,t){for(var r=arguments.length,i=Array(r>2?r-2:0),e=2;e<r;e++)i[e-2]=arguments[e];return null==n?{id:-1}:d(function(){return n.apply(null,i),!1},t)},waitTimeout:function(n,t){for(var r=arguments.length,i=Array(r>2?r-2:0),e=2;e<r;e++)i[e-2]=arguments[e];var u=0,o={},a=[];return setTimeout(function(){!function n(){var t=a[u++];if(void 0!==t){var r=t[0];if(null==r)return n();t[0]=function(){return!1!==r.apply(null,arguments)&&-1!==o.id&&n(),!1};var i=d.apply(null,t).id;o.id=i}}()},0),function n(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return a.push(r),o={waitTimeout:n,id:-1}}.apply(null,arguments)},setTaskout:function(n,t,r){for(var i=arguments.length,e=Array(i>3?i-3:0),u=3;u<i;u++)e[u-3]=arguments[u];if(null==n)return{id:-1};r=r&&r>0?r:1;var o=g(0),a=g(1,r),f=d(function(){return o<1&&-1!==f.id&&(o=o.add(a),!1!==n.apply(void 0,[o.valueOf()].concat(e)))},Math.round(t/r));return f},setRandval:function(n,t,r){for(var i=arguments.length,e=Array(i>3?i-3:0),u=3;u<i;u++)e[u-3]=arguments[u];if(null==n)return{id:-1};var o={};return function i(u){if(-1!==o.id){if(!u&&!1===n.apply(null,e))return!1;var a=t+y(r);a<0&&(a=0);var f=d(i,a).id;o.id=f}return!1}(!0),o}};return{glitchText:function(r,e){var u=n(r)[0];if(null==u)throw u+" is not a valid element";var o="",l=t(e||f),c=function(n){"string"==typeof n&&(u.textContent=n)},d={slice:function(n,t){return c(i(l,o,n,t)),d},random:function(n){return c(a(l,o,n)),d},restore:function(){return c(o),d},update:function(){return o=u.textContent,d}};return d.update()},animate:function(n,t,r){return A.setTaskout(r,n,t)},repeat:function(n,t,r){return A.setRandval(r,n,t)},stop:A.clear}});
